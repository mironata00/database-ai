# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤ –∏ –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ

## üîå –ü–æ—Ä—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ (–º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏)
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–±—â–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Docker network `db_ai_network` –ø–æ –∏–º–µ–Ω–∞–º:
- `postgres_master:5432`
- `elasticsearch:9200`
- `redis_master:6379`
- `api:8000`

### –í–Ω–µ—à–Ω–∏–µ (–¥–æ—Å—Ç—É–ø —Å —Ö–æ—Å—Ç–∞)
–≠—Ç–∏ –ø–æ—Ä—Ç—ã –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞—Ä—É–∂—É –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `.env`:

```bash
# API
API_PORT=8000              # http://localhost:8000

# Frontend
FRONTEND_PORT=3000         # http://localhost:3000

# PostgreSQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
POSTGRES_PORT=5432         # localhost:5432

# Elasticsearch (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
ES_PORT=9200              # http://localhost:9200

# Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
REDIS_PORT=6379           # localhost:6379

# MinIO
MINIO_PORT=9000           # http://localhost:9000
MINIO_CONSOLE_PORT=9001   # http://localhost:9001

# Flower (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Celery)
FLOWER_PORT=5555          # http://localhost:5555

# Nginx
NGINX_HTTP_PORT=80        # http://localhost
NGINX_HTTPS_PORT=443      # https://localhost
```

---

## üåê –î–æ—Å—Ç—É–ø —Å –≤–Ω–µ—à–Ω–µ–≥–æ IP (–¥—Ä—É–≥–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã –≤ —Å–µ—Ç–∏)

### –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏

1. **–£–∑–Ω–∞—Ç—å IP —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
ip addr show | grep inet
# –ò–ª–∏
hostname -I
```

2. **–û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã –≤ —Ñ–∞–π–µ—Ä–≤–æ–ª–µ:**
```bash
# UFW (Ubuntu)
sudo ufw allow 8000/tcp
sudo ufw allow 3000/tcp
sudo ufw allow 80/tcp

# FirewallD (CentOS/RHEL)
sudo firewall-cmd --permanent --add-port=8000/tcp
sudo firewall-cmd --reload
```

3. **–î–æ—Å—Ç—É–ø —Å –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤:**
```
http://192.168.1.100:8000  (–∑–∞–º–µ–Ω–∏—Ç–µ IP)
```

### –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ (VPS/Cloud)

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –≤ .env:**
```bash
CORS_ORIGINS=["http://your-domain.com","http://your-ip:8000"]
```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nginx (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
# –í .env
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# –î–æ—Å—Ç—É–ø
http://your-domain.com  ‚Üí Nginx ‚Üí API
```

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS:**
```
A –∑–∞–ø–∏—Å—å: your-domain.com ‚Üí IP —Å–µ—Ä–≤–µ—Ä–∞
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–ª—è production

### –ó–∞–∫—Ä—ã—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–æ—Ä—Ç—ã

–í `docker-compose.yml` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø–æ—Ä—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω—É–∂–Ω—ã —Å–Ω–∞—Ä—É–∂–∏:

```yaml
postgres_master:
  ports:
    # - "${POSTGRES_PORT:-5432}:5432"  # –ó–∞–∫—Ä—ã—Ç—å PostgreSQL –∏–∑–≤–Ω–µ
```

–û—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ:
- `80/443` (Nginx)
- –ú–æ–∂–µ—Ç `8000` (API –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nginx –∫–∞–∫ proxy

```
–í–Ω–µ—à–Ω–∏–π –º–∏—Ä ‚Üí Nginx (80/443) ‚Üí API (8000)
                             ‚Üí Frontend (3000)
```

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- SSL/TLS —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—è
- Rate limiting
- IP —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–≤—Å—ë –æ—Ç–∫—Ä—ã—Ç–æ)
```bash
# .env
API_PORT=8000
POSTGRES_PORT=5432
ES_PORT=9200
REDIS_PORT=6379
```

### Production (—Ç–æ–ª—å–∫–æ Nginx)
```bash
# .env
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã (–Ω–µ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º)
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
```bash
# .env
API_PORT=8000

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSH —Ç—É–Ω–Ω–µ–ª—å
ssh -L 8000:localhost:8000 user@server
# –¢–µ–ø–µ—Ä—å http://localhost:8000 ‚Üí —É–¥–∞–ª—ë–Ω–Ω—ã–π API
```

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç

```bash
# –£–∑–Ω–∞—Ç—å —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç
sudo lsof -i :8000

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
sudo kill -9 <PID>

# –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –≤ .env
API_PORT=8001
```

---

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

```bash
# –° —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:8000/health

# –° –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ IP)
curl http://192.168.1.100:8000/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã
sudo netstat -tulpn | grep LISTEN
```

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–õ–æ–∫–∞–ª—å–Ω–æ (–Ω–∞ —Ç–æ–π –∂–µ –º–∞—à–∏–Ω–µ):**
```bash
# –ü–æ—Ä—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —Å localhost
docker compose up -d
# http://localhost:8000
```

**–í –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏:**
```bash
# –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–µ—Ä–≤–æ–ª–ª
sudo ufw allow 8000/tcp

# –£–∑–Ω–∞—Ç—å IP
hostname -I
# –î–æ—Å—Ç—É–ø: http://192.168.x.x:8000
```

**–í –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ (production):**
```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ–ª—å–∫–æ Nginx
NGINX_HTTP_PORT=80

# –ü–æ–ª—É—á–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --nginx -d your-domain.com

# –î–æ—Å—Ç—É–ø: https://your-domain.com
```
